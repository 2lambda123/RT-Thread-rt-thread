name: Static code analysis

on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - master

jobs:
  scancode_job:
    runs-on: ubuntu-latest
    name: Static code analysis
    steps:
      - uses: actions/checkout@v3
          
      - name: Set up Python
        uses: actions/setup-python@v3
        with:
          python-version: 3.8

      - name: CPP Check
        shell: bash
        run: |
          sudo apt-get update
          sudo apt-get -qq install cppcheck
          pip install pyyaml
          git remote -v
          git fetch origin
          cppcheck --version
          ls
          git branch -a
          python3 ${GITHUB_WORKSPACE}/tools/format_ignore.py ${GITHUB_WORKSPACE}
          python3 ${GITHUB_WORKSPACE}/tools/cppcheck.py ${GITHUB_WORKSPACE}
